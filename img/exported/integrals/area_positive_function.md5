\begingroup \toks 0={macro:->[trim axis left, trim axis right] \begin {axis}[ gen2dfun, xmin=0, xmax=4, ymin=0, ymax=4, xtick={1,3}, xticklabels={$a$, $b$}, ytick={}, yticklabels={}, clip=false, height=3.5cm, ] \addplot +[domain=0.7:3.3, samples=100, smooth, name path=F] {x^3-6*x^2+11*x-3} node[anchor=south west] {$f(x)$}; \path [name path=axis] (axis cs:1,0) -- (axis cs:3,0); \addplot [thick, color=color1, fill=color1, fill opacity=0.3] fill between[of=F and axis, soft clip={domain=1:3},]; \node at (2,1.5) {$\displaystyle \int _a^b f(x)\,dx$}; \coordinate (O) at (0,0); \coordinate (A) at (1,3); \coordinate (B) at (3,3); \draw [gray, dashed] (A) -- (A|-O); \draw [gray, dashed] (B) -- (B|-O); \end {axis}; }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
